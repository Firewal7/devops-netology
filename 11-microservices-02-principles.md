### Домашнее задание к занятию «Микросервисы: принципы»

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры. Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: API Gateway

Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:

- маршрутизация запросов к нужному сервису на основе конфигурации,
- возможность проверки аутентификационной информации в запросах,
- обеспечение терминации HTTPS.

Обоснуйте свой выбор.

## Ответ: 

API Gateway является важным компонентом микросервисной архитектуры, позволяя маршрутизировать запросы к различным службам, обеспечивать безопасность и управлять трафиком.

Давайте рассмотрим три популярных решения для API Gateway и сравним их:

1. Amazon API Gateway
2. Kong
3. Nginx

Сравнительная таблица:

|Характеристика	| Amazon API Gateway | Kong | Nginx |
|--------|--------|-------|--------------------------|
|Маршрутизация на основе конфигурации|	Да |	Да |	Да  (с использованием модулей) |
|Проверка аутентификационной информации|	Да (поддерживает AWS IAM, Lambda, Cognito и др.)|	Да (с использованием плагинов)|	Да (с использованием модулей)|
|Терминация HTTPS|	Да|	Да|	Да|
|Расширяемость|	Ограничено AWS-сервисами|	Да (с помощью плагинов)|	Да (с помощью модулей)|
|Интеграция с облаками|	Интегрировано с AWS|Может быть развернуто в любом облаке|	Может быть развернуто в любом облаке|
|Цена|	По запросу и трафику|	Бесплатная и коммерческая версия|	Бесплатная и коммерческая версия|

На основе вышеприведенной таблицы:

- Amazon API Gateway будет логичным выбором из-за глубокой интеграции с другими AWS-сервисами.

- Kong предлагает большую гибкость и расширяемость с помощью плагинов, а также может быть развернут в любом облаке или на локальном сервере.

- Nginx - это проверенное временем решение, которое можно настроить для работы в качестве API Gateway. Он может быть не таким функциональным "из коробки" как другие решения, но с правильной конфигурацией и модулями он может выполнять большинство необходимых задач.

Выбор: Если бы мне нужно было выбирать решение, основываясь на вышеприведенных требованиях и без учета других факторов (таких как стоимость, интеграция с существующей инфраструктурой и т. д.), я бы выбрал Kong. Он предлагает необходимую функциональность, гибкость и может быть развернут в любом окружении.

## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:

- поддержка кластеризации для обеспечения надёжности,
- хранение сообщений на диске в процессе доставки,
- высокая скорость работы,
- поддержка различных форматов сообщений,
- разделение прав доступа к различным потокам сообщений,
- простота эксплуатации.

Обоснуйте свой выбор.

Ответ:

|Брокер сообщений|	Поддержка кластеризации|	Хранение сообщений на диске|	Высокая скорость работы|	Поддержка форматов сообщений|	Разделение прав доступа|	Простота эксплуатации|
|--------------|------------|-------------|-------------|-------------|---------|-----------|
|Apache Kafka|	Да|	Да|	Да|	JSON, Avro, и другие|	Да|	Средняя|
|RabbitMQ|	Да|	Да|	Да|	Разнообразные форматы|	Да|	Высокая|
|Apache Pulsar|	Да|	Да| Да|	JSON, Avro, и другие|	Да|	Высокая|
|ActiveMQ|	Да|	Да|	Да|	Разнообразные форматы|	Да|	Высокая|
|NATS|	Да|	Нет (все в памяти)|	Очень высокая|	JSON, Protobuf и другие|	Да|	Высокая|

## Выбор: Apache Kafka

Обоснование:

1. Поддержка кластеризации: Apache Kafka известен своей отличной поддержкой кластеризации, что обеспечивает высокую надежность и горизонтальное масштабирование.

2. Хранение сообщений на диске: Kafka хранит сообщения на диске, что делает его надежным в случае сбоев, и обеспечивает возможность восстановления сообщений.

3. Высокая скорость работы: Apache Kafka спроектирован для обработки больших объемов данных с высокой производительностью, что делает его подходящим для высоконагруженных систем.

4. Поддержка различных форматов сообщений: Kafka поддерживает разнообразные форматы сообщений, включая JSON и Avro, что делает его гибким для различных приложений.

5. Разделение прав доступа: Kafka позволяет настраивать права доступа и разделение тем (topics) между пользователями, обеспечивая безопасность.

6. Простота эксплуатации: Хотя Kafka может потребовать более сложной настройки по сравнению с некоторыми другими брокерами, он предоставляет множество ресурсов и документации для помощи в установке и настройке.

В итоге, Apache Kafka предоставляет широкий набор возможностей, которые соответствуют вашим требованиям, и он широко используется в крупных и высоконагруженных системах для обработки потоков данных.

